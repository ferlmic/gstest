<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reciprocal function of stack_tsDF() — unstack_tsDF • gstest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reciprocal function of stack_tsDF() — unstack_tsDF"><meta name="description" content='
Convert a stacked (tall) multivariate time series data frame (benchmarking() and stock_benchmarking()
data format) into a non-stacked (wide) multivariate time series data frame.
This function, combined with tsDF_to_ts(), is useful to convert the benchmarked data frame returned by a call to
benchmarking() or stock_benchmarking() back into a "mts" object, where multiple series were benchmarked in
BY-group processing mode.'><meta property="og:description" content='
Convert a stacked (tall) multivariate time series data frame (benchmarking() and stock_benchmarking()
data format) into a non-stacked (wide) multivariate time series data frame.
This function, combined with tsDF_to_ts(), is useful to convert the benchmarked data frame returned by a call to
benchmarking() or stock_benchmarking() back into a "mts" object, where multiple series were benchmarked in
BY-group processing mode.'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gstest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/gstest.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/benchmarking-cookbook.html">Benchmarking CookBook</a></li>
    <li><a class="dropdown-item" href="../articles/benchmarking-demo-script.html">A Beginner's Benchmarking Demo Script</a></li>
    <li><a class="dropdown-item" href="../articles/osqp-settings-sequence-dataframe.html">OSQP Settings Sequence Data Frame</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/tree/main/">G-Series 3.0 (latest - R package gstest 3.0.0)</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/releases/tag/v2.0/">G-Series 2.0 (SAS® version)</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/releases/tag/v1.04/">G-Series 1.04 (SAS® version)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ferlmic/gstest/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>

    <ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="#" onclick="window.location = location.href.replace('/en/','/fr/');"><span class="fa fa-language fa-lg"></span> Français</a></li></ul></div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reciprocal function of <code><a href="stack_tsDF.html">stack_tsDF()</a></code></h1>
      <small class="dont-index">Source: <a href="https://github.com/ferlmic/gstest/tree/main/R/unstack_tsDF.R" class="external-link"><code>R/unstack_tsDF.R</code></a></small>
      <div class="d-none name"><code>unstack_tsDF.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p></p>
<p>Convert a stacked (tall) multivariate time series data frame (<code><a href="benchmarking.html">benchmarking()</a></code> and <code><a href="stock_benchmarking.html">stock_benchmarking()</a></code>
data format) into a non-stacked (wide) multivariate time series data frame.</p>
<p>This function, combined with <code><a href="tsDF_to_ts.html">tsDF_to_ts()</a></code>, is useful to convert the benchmarked data frame returned by a call to
<code><a href="benchmarking.html">benchmarking()</a></code> or <code><a href="stock_benchmarking.html">stock_benchmarking()</a></code> back into a "mts" object, where multiple series were benchmarked in
<em>BY-group</em> processing mode.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">unstack_tsDF</span><span class="op">(</span></span>
<span>  <span class="va">ts_df</span>,</span>
<span>  ser_cName <span class="op">=</span> <span class="st">"series"</span>,</span>
<span>  yr_cName <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  per_cName <span class="op">=</span> <span class="st">"period"</span>,</span>
<span>  val_cName <span class="op">=</span> <span class="st">"value"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-ts-df">ts_df<a class="anchor" aria-label="anchor" href="#arg-ts-df"></a></dt>
<dd><p>(mandatory)</p>
<p>Data frame, or object to be coerced to one, that contains the multivariate time series data to be <em>unstacked</em>.</p></dd>


<dt id="arg-ser-cname">ser_cName<a class="anchor" aria-label="anchor" href="#arg-ser-cname"></a></dt>
<dd><p>(optional)</p>
<p>String specifying the name of the character variable (column) in the input time series data frame that
contains the series identifier (the time series variable names in the output data frame).</p>
<p><strong>Default value</strong> is <code>ser_cName = "series"</code>.</p></dd>


<dt id="arg-yr-cname-per-cname">yr_cName, per_cName<a class="anchor" aria-label="anchor" href="#arg-yr-cname-per-cname"></a></dt>
<dd><p>(optional)</p>
<p>Strings specifying the name of the numeric variables (columns) in the input time series data frame that
contain the data point year and period identifiers. These variables are <em>transferred</em> to the output data
frame with the same names.</p>
<p><strong>Default values</strong> are <code>yr_cName = "year"</code> and <code>per_cName   = "period"</code>.</p></dd>


<dt id="arg-val-cname">val_cName<a class="anchor" aria-label="anchor" href="#arg-val-cname"></a></dt>
<dd><p>(optional)</p>
<p>String specifying the name of the numeric variable (column) in the input time series data frame that
contains the data point values.</p>
<p><strong>Default value</strong> is <code>val_cName = "value"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function returns a data frame with three or more variables:</p><ul><li><p>Data point year, type numeric (see argument <code>yr_cName</code>)</p></li>
<li><p>Data point period, type numeric (see argument <code>per_cName</code>)</p></li>
<li><p>One time series data variable for each distinct value of the input data frame variable specified with
argument <code>ser_cName</code>, type numeric (see arguments <code>ser_cName</code> and <code>val_cName</code>)</p></li>
</ul><p>Note: the function returns a "data.frame" object than can be explicitly coerced to another type of object
with the appropriate <code>as*()</code> function (e.g., <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">tibble::as_tibble()</a></code> would coerce it to a tibble).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="stack_tsDF.html">stack_tsDF()</a></code> <code><a href="tsDF_to_ts.html">tsDF_to_ts()</a></code> <code><a href="benchmarking.html">benchmarking()</a></code> <code><a href="stock_benchmarking.html">stock_benchmarking()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Proportional benchmarking for multiple (3) quarterly series processed with </span></span></span>
<span class="r-in"><span><span class="co"># argument `by` (in BY-group mode)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ind_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.9</span>, <span class="fl">2.4</span>, <span class="fl">3.1</span>, <span class="fl">2.2</span>, <span class="fl">2.0</span>, <span class="fl">2.6</span>, <span class="fl">3.4</span>, <span class="fl">2.4</span>, <span class="fl">2.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ind_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="ts_to_tsDF.html">ts_to_tsDF</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ser1 <span class="op">=</span> <span class="va">ind_vec</span>,</span></span>
<span class="r-in"><span>                                   ser2 <span class="op">=</span> <span class="va">ind_vec</span> <span class="op">*</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>                                   ser3 <span class="op">=</span> <span class="va">ind_vec</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">1</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bmk_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10.3</span>, <span class="fl">10.2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bmk_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="ts_to_bmkDF.html">ts_to_bmkDF</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ser1 <span class="op">=</span> <span class="va">bmk_vec</span>,</span></span>
<span class="r-in"><span>                                    ser2 <span class="op">=</span> <span class="va">bmk_vec</span> <span class="op">*</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>                                    ser3 <span class="op">=</span> <span class="va">bmk_vec</span> <span class="op">*</span> <span class="fl">10</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                         start <span class="op">=</span> <span class="fl">2015</span>, frequency <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      ind_frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">out_bench</span> <span class="op">&lt;-</span> <span class="fu"><a href="benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="fu"><a href="stack_tsDF.html">stack_tsDF</a></span><span class="op">(</span><span class="va">ind_df</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          <span class="fu"><a href="stack_bmkDF.html">stack_bmkDF</a></span><span class="op">(</span><span class="va">bmk_df</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          rho <span class="op">=</span> <span class="fl">0.729</span>, lambda <span class="op">=</span> <span class="fl">1</span>, biasOption <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                          by <span class="op">=</span> <span class="st">"series"</span>,</span></span>
<span class="r-in"><span>                          quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Benchmarking by-group 1 (series=ser1)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> =====================================</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Benchmarking by-group 2 (series=ser2)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> =====================================</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Benchmarking by-group 3 (series=ser3)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> =====================================</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Initial and final (benchmarked) quarterly time series data frames</span></span></span>
<span class="r-in"><span><span class="va">ind_df</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year period ser1 ser2 ser3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2015      1  1.9  190   19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2015      2  2.4  240   24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2015      3  3.1  310   31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2015      4  2.2  220   22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2016      1  2.0  200   20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016      2  2.6  260   26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 2016      3  3.4  340   34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 2016      4  2.4  240   24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 2017      1  2.3  230   23</span>
<span class="r-in"><span><span class="fu">unstack_tsDF</span><span class="op">(</span><span class="va">out_bench</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   year period     ser1     ser2     ser3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2015      1 2.049326 204.9326 20.49326</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2015      2 2.601344 260.1344 26.01344</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2015      3 3.337638 333.7638 33.37638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2015      4 2.311691 231.1691 23.11691</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2016      1 2.021090 202.1090 20.21090</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016      2 2.554801 255.4801 25.54801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 2016      3 3.292193 329.2193 32.92193</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 2016      4 2.331915 233.1915 23.31915</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 2017      1 2.268017 226.8017 22.68017</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michel Ferland, Statistics Canada.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

