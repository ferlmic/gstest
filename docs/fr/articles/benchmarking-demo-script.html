<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Un script d'étalonnage pour débutant • gstest</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Un script d'étalonnage pour débutant">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Navigation sur le site"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gstest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Dernière version publiée">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/gstest.html">Prise en main</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Référence</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/benchmarking-cookbook.html">Livre de recette sur l'étalonnage</a></li>
    <li><a class="dropdown-item" href="../articles/benchmarking-demo-script.html">Un script d'étalonnage pour débutant</a></li>
    <li><a class="dropdown-item" href="../articles/osqp-settings-sequence-dataframe.html">« Data frame » pour la séquence de paramètres d'OSQP</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-nouveaut-s" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Nouveautés</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-nouveaut-s">
<li><h6 class="dropdown-header" data-toc-skip>Versions</h6></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/tree/main/">G-Séries 3.0 (version la plus récente - librairie R gstest 3.0.0)</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/releases/tag/v2.0/">G-Séries 2.0 (version SAS®)</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/releases/tag/v1.04/">G-Séries 1.04 (version SAS®)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changements</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Rechercher sur le site" placeholder="Rechercher" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ferlmic/gstest/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>

    <ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="#" onclick="window.location = location.href.replace('/fr/','/en/');"><span class="fa fa-language fa-lg"></span> English</a></li></ul>
</div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Un script d'étalonnage pour débutant</h1>
            
      
      <small class="dont-index">Source : <a href="https://github.com/ferlmic/gstest/tree/main/fr/vignettes/benchmarking-demo-script.Rmd" class="external-link"><code>vignettes/benchmarking-demo-script.Rmd</code></a></small>
      <div class="d-none name"><code>benchmarking-demo-script.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Charger G-Séries en R (librairie gstest)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ferlmic.github.io/gstest/en/" class="external-link">gstest</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Définir le répertoire de travail (pour les fichiers graphiques PDF)</span></span>
<span><span class="va">iniwd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"C:/Temp"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">#### Exemple 1 (une série trimestrielle) ####</span></span>
<span><span class="co"># Cas simple d'étalonnage d'une série trimestrielle à des valeurs annuelles</span></span>
<span></span>
<span><span class="co"># Série indicatrice trimestrielle</span></span>
<span><span class="va">ma_sc_tri</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.9</span>, <span class="fl">2.4</span>, <span class="fl">3.1</span>, <span class="fl">2.2</span>, <span class="fl">2.0</span>, <span class="fl">2.6</span>, <span class="fl">3.4</span>, <span class="fl">2.4</span>, <span class="fl">2.3</span><span class="op">)</span>, </span>
<span>                start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>                frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">mes_ind1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_to_tsDF.html">ts_to_tsDF</a></span><span class="op">(</span><span class="va">ma_sc_tri</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Étalons annuels pour données trimestrielles</span></span>
<span><span class="va">ma_sc_ann</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10.3</span>, <span class="fl">10.2</span><span class="op">)</span>, </span>
<span>                start <span class="op">=</span> <span class="fl">2015</span>, </span>
<span>                frequency <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">mes_eta1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_to_bmkDF.html">ts_to_bmkDF</a></span><span class="op">(</span><span class="va">ma_sc_ann</span>, ind_frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Étalonnage avec...</span></span>
<span><span class="co">#   - valeur de `rho` recommandée pour des séries trimestrielles (`rho = 0.729`)</span></span>
<span><span class="co">#   - modèle proportionnel (`lambda = 1`)</span></span>
<span><span class="co">#   - correction de la série indicatrice pour le biais avec estimation du biais </span></span>
<span><span class="co">#     (`biasOption = 3`)</span></span>
<span><span class="va">res_eta1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind1</span>,</span>
<span>                         <span class="va">mes_eta1</span>,</span>
<span>                         rho <span class="op">=</span> <span class="fl">0.729</span>,</span>
<span>                         lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                         biasOption <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sorties</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta1</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta1</span><span class="op">$</span><span class="va">benchmarks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta1</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Graphiques (ensemble par défaut)</span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta1</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_ex1.pdf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Avec la table des taux de croissance (« growth rates »)</span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta1</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_ex1_avec_TableTC.pdf"</span>,</span>
<span>                GR_table_flag <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Comparer avec la librairie tempdisagg qui offre l'étalonnage de Denton </span></span>
<span><span class="co"># (version modifiée par Cholette)</span></span>
<span></span>
<span><span class="co">#install.packages("tempdisagg")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://journal.r-project.org/archive/2013-2/sax-steiner.pdf" class="external-link">tempdisagg</a></span><span class="op">)</span></span>
<span><span class="co">#install.packages("dplyr")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Denton proportionnel</span></span>
<span><span class="va">denton_mult</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind1</span>,</span>
<span>                            <span class="va">mes_eta1</span>,</span>
<span>                            rho <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                            lambda <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">denton_mult_td</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tempdisagg/man/td.html" class="external-link">td</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">ma_sc_ann</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">ma_sc_tri</span>,</span>
<span>                     method <span class="op">=</span> <span class="st">"denton-cholette"</span>,</span>
<span>                     criterion <span class="op">=</span> <span class="st">"proportional"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comp_mult</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.union.html" class="external-link">ts.union</a></span><span class="op">(</span>gstest <span class="op">=</span> <span class="fu"><a href="../reference/tsDF_to_ts.html">tsDF_to_ts</a></span><span class="op">(</span><span class="va">denton_mult</span><span class="op">$</span><span class="va">series</span>, frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>                      tempdisagg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">denton_mult_td</span><span class="op">)</span>,</span>
<span>                      dframe <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">.</span>, diff <span class="op">=</span> <span class="va">.</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">.</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mêmes résultats</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">comp_mult</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Denton additif</span></span>
<span><span class="va">denton_add</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind1</span>,</span>
<span>                           <span class="va">mes_eta1</span>,</span>
<span>                           rho <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                           lambda <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">denton_add_td</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tempdisagg/man/td.html" class="external-link">td</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">ma_sc_ann</span> <span class="op">~</span> <span class="fl">0</span> <span class="op">+</span> <span class="va">ma_sc_tri</span>,</span>
<span>                    method <span class="op">=</span> <span class="st">"denton-cholette"</span>,</span>
<span>                    criterion <span class="op">=</span> <span class="st">"additive"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comp_add</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.union.html" class="external-link">ts.union</a></span><span class="op">(</span>gstest <span class="op">=</span> <span class="fu"><a href="../reference/tsDF_to_ts.html">tsDF_to_ts</a></span><span class="op">(</span><span class="va">denton_add</span><span class="op">$</span><span class="va">series</span>, frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>                     tempdisagg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">denton_add_td</span><span class="op">)</span>,</span>
<span>                     dframe <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">.</span>, diff <span class="op">=</span> <span class="va">.</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">.</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mêmes résultats</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">comp_add</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">#### Exemple 2 (plusieurs séries trimestrielles) ####</span></span>
<span><span class="co"># Deux séries trimestrielles à étalonner à des valeurs annuelles, </span></span>
<span><span class="co"># avec groupes-BY et coef. d'altérabilité définis par l'utilisateur.</span></span>
<span></span>
<span><span class="co"># Données sur les ventes (mêmes ventes pour les groupes A et B; seuls les coef. </span></span>
<span><span class="co"># d'alté. pour les ventes de camionnettes diffèrent)</span></span>
<span><span class="va">ventes_tri</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="co"># Voitures</span></span>
<span>                          <span class="fl">1851</span>, <span class="fl">2436</span>, <span class="fl">3115</span>, <span class="fl">2205</span>, <span class="fl">1987</span>, <span class="fl">2635</span>, <span class="fl">3435</span>, <span class="fl">2361</span>, <span class="fl">2183</span>, <span class="fl">2822</span>,</span>
<span>                          <span class="fl">3664</span>, <span class="fl">2550</span>, <span class="fl">2342</span>, <span class="fl">3001</span>, <span class="fl">3779</span>, <span class="fl">2538</span>, <span class="fl">2363</span>, <span class="fl">3090</span>, <span class="fl">3807</span>, <span class="fl">2631</span>,</span>
<span>                          <span class="fl">2601</span>, <span class="fl">3063</span>, <span class="fl">3961</span>, <span class="fl">2774</span>, <span class="fl">2476</span>, <span class="fl">3083</span>, <span class="fl">3864</span>, <span class="fl">2773</span>, <span class="fl">2489</span>, <span class="fl">3082</span>,</span>
<span>                          <span class="co"># Camionnettes</span></span>
<span>                          <span class="fl">1900</span>, <span class="fl">2200</span>, <span class="fl">3000</span>, <span class="fl">2000</span>, <span class="fl">1900</span>, <span class="fl">2500</span>, <span class="fl">3800</span>, <span class="fl">2500</span>, <span class="fl">2100</span>, <span class="fl">3100</span>,</span>
<span>                          <span class="fl">3650</span>, <span class="fl">2950</span>, <span class="fl">3300</span>, <span class="fl">4000</span>, <span class="fl">3290</span>, <span class="fl">2600</span>, <span class="fl">2010</span>, <span class="fl">3600</span>, <span class="fl">3500</span>, <span class="fl">2100</span>,</span>
<span>                          <span class="fl">2050</span>, <span class="fl">3500</span>, <span class="fl">4290</span>, <span class="fl">2800</span>, <span class="fl">2770</span>, <span class="fl">3080</span>, <span class="fl">3100</span>, <span class="fl">2800</span>, <span class="fl">3100</span>, <span class="fl">2860</span><span class="op">)</span>,</span>
<span>                        ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>                 start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2011</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                 frequency <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                 names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"voitures"</span>, <span class="st">"camionnettes"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">ventes_tri</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ventes_ann</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="co"># Voitures</span></span>
<span>                          <span class="fl">10324</span>, <span class="fl">10200</span>, <span class="fl">10582</span>, <span class="fl">11097</span>, <span class="fl">11582</span>, <span class="fl">11092</span>,</span>
<span>                          <span class="co"># Camionnettes</span></span>
<span>                          <span class="fl">12000</span>, <span class="fl">10400</span>, <span class="fl">11550</span>, <span class="fl">11400</span>, <span class="fl">14500</span>, <span class="fl">16000</span><span class="op">)</span>,</span>
<span>                        ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>                 start <span class="op">=</span> <span class="fl">2011</span>,</span>
<span>                 frequency <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                 names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"voitures"</span>, <span class="st">"camionnettes"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Séries indicatrices trimestrielles (avec les coef. d'alté. par défaut pour l'instant)</span></span>
<span><span class="va">mes_ind2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>groupe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ventes_tri</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                   alt_cam <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ventes_tri</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        <span class="fu"><a href="../reference/ts_to_tsDF.html">ts_to_tsDF</a></span><span class="op">(</span><span class="va">ventes_tri</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>groupe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ventes_tri</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                   alt_cam <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ventes_tri</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        <span class="fu"><a href="../reference/ts_to_tsDF.html">ts_to_tsDF</a></span><span class="op">(</span><span class="va">ventes_tri</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ventes contraignantes de camionnettes (coef. d'alté. = 0) pour 2012 T1 et T2 </span></span>
<span><span class="co"># dans le groupe A (lignes 5 et 6)</span></span>
<span><span class="va">mes_ind2</span><span class="op">$</span><span class="va">alt_cam</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="co"># Étalons annuels pour données trimestrielles (sans coef. d'alté.)</span></span>
<span><span class="va">mes_eta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>groupe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ventes_ann</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        <span class="fu"><a href="../reference/ts_to_bmkDF.html">ts_to_bmkDF</a></span><span class="op">(</span><span class="va">ventes_ann</span>, ind_frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>groupe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ventes_ann</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        <span class="fu"><a href="../reference/ts_to_bmkDF.html">ts_to_bmkDF</a></span><span class="op">(</span><span class="va">ventes_ann</span>, ind_frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Étalonnage avec...</span></span>
<span><span class="co">#   - valeur de `rho` recommandée pour des séries trimestrielles (`rho = 0.729`)</span></span>
<span><span class="co">#   - modèle proportionnel (`lambda = 1`)</span></span>
<span><span class="co">#   - sans correction du biais (`biasOption = 1` et `bias` non spécifié)</span></span>
<span><span class="co">#   - `quiet = TRUE` afin d'éviter l'affichage de l'en-tête de la fonction</span></span>
<span><span class="va">res_eta2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind2</span>,</span>
<span>                         <span class="va">mes_eta2</span>,</span>
<span>                         rho <span class="op">=</span> <span class="fl">0.729</span>,</span>
<span>                         lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                         biasOption <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                         var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"voitures"</span>, <span class="st">"camionnettes / alt_cam"</span><span class="op">)</span>,</span>
<span>                         with <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"voitures"</span>, <span class="st">"camionnettes"</span><span class="op">)</span>,</span>
<span>                         by <span class="op">=</span> <span class="st">"groupe"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sorties</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta2</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta2</span><span class="op">$</span><span class="va">benchmarks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta2</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Graphiques</span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta2</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_ex2.pdf"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">#### Exemple 3 (plusieurs séries trimestrielles) ####</span></span>
<span><span class="co"># Identique à l'exemple 2, mais en étalonnant les 4 séries </span></span>
<span><span class="co"># en tant que groupes-BY (4 groupes-BY au lieu de 2)</span></span>
<span></span>
<span><span class="va">mes_ind3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stack_tsDF.html">stack_tsDF</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_to_tsDF.html">ts_to_tsDF</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.union.html" class="external-link">ts.union</a></span><span class="op">(</span>A <span class="op">=</span> <span class="va">ventes_tri</span>, B <span class="op">=</span> <span class="va">ventes_tri</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mes_ind3</span><span class="op">$</span><span class="va">alter</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">mes_ind3</span><span class="op">$</span><span class="va">alter</span><span class="op">[</span><span class="va">mes_ind3</span><span class="op">$</span><span class="va">series</span> <span class="op">==</span> <span class="st">"A.camionnettes"</span></span>
<span>                <span class="op">&amp;</span> <span class="va">mes_ind3</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2012</span> <span class="op">&amp;</span> <span class="va">mes_ind3</span><span class="op">$</span><span class="va">period</span> <span class="op">&lt;=</span> <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">mes_eta3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stack_bmkDF.html">stack_bmkDF</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_to_bmkDF.html">ts_to_bmkDF</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.union.html" class="external-link">ts.union</a></span><span class="op">(</span>A <span class="op">=</span> <span class="va">ventes_ann</span>, B <span class="op">=</span> <span class="va">ventes_ann</span><span class="op">)</span>,</span>
<span>                                    ind_frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">res_eta3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind3</span>,</span>
<span>                         <span class="va">mes_eta3</span>,</span>
<span>                         rho <span class="op">=</span> <span class="fl">0.729</span>,</span>
<span>                         lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                         biasOption <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                         var <span class="op">=</span> <span class="st">"value / alter"</span>,</span>
<span>                         with <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>                         by <span class="op">=</span> <span class="st">"series"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sorties</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta3</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta3</span><span class="op">$</span><span class="va">benchmarks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta3</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Graphiques</span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta3</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_ex3.pdf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convertir la série étalonnée en objet "mts"</span></span>
<span><span class="va">mes_ind3_eta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tsDF_to_ts.html">tsDF_to_ts</a></span><span class="op">(</span><span class="fu"><a href="../reference/unstack_tsDF.html">unstack_tsDF</a></span><span class="op">(</span><span class="va">res_eta3</span><span class="op">$</span><span class="va">series</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mes_ind3_eta</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mes_ind3_eta</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">#### Données mensuelles (série de Box &amp; Jenkins sur les passagers aériens) ####</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span></span>
<span><span class="va">mes_ind_AP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_to_tsDF.html">ts_to_tsDF</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Créer des étalons annuels en changeant le niveau (5 fois plus grand), en ajoutant </span></span>
<span><span class="co"># du bruit aléatoire et en laissant tomber les 2 derniers étalons.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2003-03-25"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># pour reproduire les résultats (date de votre choix)</span></span>
<span><span class="co">#set.seed(NULL)</span></span>
<span><span class="va">AP_ann</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/jitter.html" class="external-link">jitter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate.ts</a></span><span class="op">(</span><span class="va">AirPassengers</span>, nfrequency <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="va">sum</span><span class="op">)</span> <span class="op">*</span> <span class="fl">5</span>, </span>
<span>                       amount <span class="op">=</span> <span class="fl">2500</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mes_eta_AP</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="../reference/ts_to_bmkDF.html">ts_to_bmkDF</a></span><span class="op">(</span><span class="va">AP_ann</span>, ind_frequency <span class="op">=</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span></span>
<span></span>
<span></span>
<span><span class="co"># Avec correction pour le biais (estimé avec `biasOption = 3`)</span></span>
<span><span class="co">#   =&gt; tout semble bien</span></span>
<span><span class="va">res_eta_AP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_AP</span>,</span>
<span>                           <span class="va">mes_eta_AP</span>,</span>
<span>                           rho <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>                           lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                           biasOption <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP</span><span class="op">$</span><span class="va">benchmarks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta_AP</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_AP.pdf"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Sans correction pour le biais (`biasOption = 1`)</span></span>
<span><span class="co">#   =&gt; problèmes avec les ajustements projetés en fin de série pour les périodes </span></span>
<span><span class="co">#      non couvertes par un étalon</span></span>
<span><span class="va">res_eta_AP_sansBiais</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_AP</span>,</span>
<span>                                     <span class="va">mes_eta_AP</span>,</span>
<span>                                     rho <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>                                     lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                     biasOption <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_sansBiais</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_sansBiais</span><span class="op">$</span><span class="va">benchmarks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_sansBiais</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta_AP_sansBiais</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_AP_sansBiais.pdf"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Étalonnage de Denton (`rho = 1`, correction du biais non pertinente)</span></span>
<span><span class="co">#   =&gt; dernier ajustement répété (à jamais) en fin de série </span></span>
<span><span class="co">#      (hypothèse forte, mais pas nécessairement problématique)</span></span>
<span><span class="va">res_eta_AP_denton</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_AP</span>,</span>
<span>                                  <span class="va">mes_eta_AP</span>,</span>
<span>                                  rho <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                  lambda <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_denton</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_denton</span><span class="op">$</span><span class="va">benchmarks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_denton</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta_AP_denton</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_AP_Denton.pdf"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Étalonnage approximatif de Denton (`rho = 0.999`, `biasOption = 3`)</span></span>
<span><span class="co">#   =&gt; approximation à l'aide du modèle de régression d'étalonnage </span></span>
<span><span class="co">#   =&gt; dernier ajustement répété en fin de série (légère convergence vers le biais</span></span>
<span><span class="co">#      comparativement à la méthode de Denton « pure »)</span></span>
<span><span class="va">res_eta_AP_approxDenton</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_AP</span>,</span>
<span>                                        <span class="va">mes_eta_AP</span>,</span>
<span>                                        rho <span class="op">=</span> <span class="fl">0.999</span>,</span>
<span>                                        lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                        biasOption <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_approxDenton</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_approxDenton</span><span class="op">$</span><span class="va">benchmarks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_approxDenton</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta_AP_approxDenton</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_AP_approxDenton.pdf"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Prorata (`lambda = 0.5` et `rho = 0`)</span></span>
<span><span class="co">#   =&gt; aucune préservation du mouvement: tous les ajustements sont regroupés en janvier </span></span>
<span><span class="co">#      à chaque année (avec un impact désastreux sur certains des mouvements initiaux </span></span>
<span><span class="co">#      de décembre à janvier)</span></span>
<span><span class="co">#   =&gt; convergence immédiate vers le biais (estimé avec `biasOption = 3`) pour les </span></span>
<span><span class="co">#      ajustements projetés en fin de série</span></span>
<span><span class="va">res_eta_AP_prorata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_AP</span>,</span>
<span>                                   <span class="va">mes_eta_AP</span>,</span>
<span>                                   rho <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                   lambda <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                                   biasOption <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_prorata</span><span class="op">$</span><span class="va">series</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_prorata</span><span class="op">$</span><span class="va">benchmarks</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">res_eta_AP_prorata</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_eta_AP_prorata</span><span class="op">$</span><span class="va">graphTable</span>, </span>
<span>                <span class="st">"Graphs_AP_prorata.pdf"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co">#### Stocks de fin d'année (« bris » dans les ajustements avec `benchmarking()`) ####</span></span>
<span></span>
<span><span class="co"># Série de stocks trimestriels (même patron répété chaque année)</span></span>
<span><span class="va">mes_ind_stock</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_to_tsDF.html">ts_to_tsDF</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">85</span>, <span class="fl">95</span>, <span class="fl">125</span>, <span class="fl">95</span><span class="op">)</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>                               start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2013</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                               frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Étalons annuels (stocks de fin d'année)</span></span>
<span><span class="va">mes_eta_stock</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_to_bmkDF.html">ts_to_bmkDF</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">135</span>, <span class="fl">125</span>, <span class="fl">155</span>, <span class="fl">145</span>, <span class="fl">165</span><span class="op">)</span>,</span>
<span>                                start <span class="op">=</span> <span class="fl">2013</span>,</span>
<span>                                frequency <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                             discrete_flag <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                             alignment <span class="op">=</span> <span class="st">"e"</span>,</span>
<span>                             ind_frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Avec `benchmarking()` (approche « Proc Benchmarking »)</span></span>
<span><span class="va">res_stock_PB</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_stock</span>,</span>
<span>                             <span class="va">mes_eta_stock</span>,</span>
<span>                             rho <span class="op">=</span> <span class="fl">0.729</span>,</span>
<span>                             lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                             biasOption <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Avec `stock_benchmarking()` (approche « Stock Benchmarking »)</span></span>
<span><span class="va">res_stock_SB</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stock_benchmarking.html">stock_benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_stock</span>,</span>
<span>                                   <span class="va">mes_eta_stock</span>,</span>
<span>                                   rho <span class="op">=</span> <span class="fl">0.729</span>,</span>
<span>                                   lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                   biasOption <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ajustements d'étalonnage des deux approches</span></span>
<span><span class="fu"><a href="../reference/plot_benchAdj.html">plot_benchAdj</a></span><span class="op">(</span>PB_graphTable <span class="op">=</span> <span class="va">res_stock_PB</span><span class="op">$</span><span class="va">graphTable</span>,</span>
<span>              SB_graphTable <span class="op">=</span> <span class="va">res_stock_SB</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Avez-vous remarqué que les ajustements de `stock_benchmarking()` sont plus lisses </span></span>
<span><span class="co"># que ceux de `benchmarking()` ?</span></span>
<span></span>
<span><span class="co"># L'amélioration de la qualité des données étalonnées qui en résulte n'est pas </span></span>
<span><span class="co"># nécessairement évidente dans cet exemple.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res_stock_SB</span><span class="op">$</span><span class="va">graphTable</span><span class="op">$</span><span class="va">t</span>, <span class="va">res_stock_SB</span><span class="op">$</span><span class="va">graphTable</span><span class="op">$</span><span class="va">benchmarked</span>, </span>
<span>     type <span class="op">=</span> <span class="st">"b"</span>, col <span class="op">=</span> <span class="st">"red"</span>, xlab <span class="op">=</span> <span class="st">"t"</span>, ylab <span class="op">=</span> <span class="st">"Stocks étalonnés"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">res_stock_PB</span><span class="op">$</span><span class="va">graphTable</span><span class="op">$</span><span class="va">t</span>, <span class="va">res_stock_PB</span><span class="op">$</span><span class="va">graphTable</span><span class="op">$</span><span class="va">benchmarked</span>, </span>
<span>      type <span class="op">=</span> <span class="st">"b"</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"topleft"</span>, bty <span class="op">=</span> <span class="st">"n"</span>, inset <span class="op">=</span> <span class="fl">0.05</span>, lty <span class="op">=</span> <span class="fl">1</span>, pch <span class="op">=</span> <span class="fl">1</span>, </span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"blue"</span><span class="op">)</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"res_stock_SB"</span>, <span class="st">"res_stock_PB"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html" class="external-link">title</a></span><span class="op">(</span><span class="st">"Stocks étalonnés"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Graphiques PDF</span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_stock_PB</span><span class="op">$</span><span class="va">graphTable</span>, <span class="st">"Graphs_stock_PB.pdf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_stock_SB</span><span class="op">$</span><span class="va">graphTable</span>, <span class="st">"Graphs_stock_SB.pdf"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Qu'en est-il des cas où un indicateur plat (rectiligne) est utilisé, ce qui se produit </span></span>
<span><span class="co"># souvent en pratique en l'absence d'un bon indicateur des mouvements infra-annuels ?</span></span>
<span><span class="va">mes_ind_plat</span> <span class="op">&lt;-</span> <span class="va">mes_ind_stock</span></span>
<span><span class="va">mes_ind_plat</span><span class="op">$</span><span class="va">value</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">res_stock_PB2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/benchmarking.html">benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_plat</span>,</span>
<span>                              <span class="va">mes_eta_stock</span>,</span>
<span>                              rho <span class="op">=</span> <span class="fl">0.729</span>,</span>
<span>                              lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                              biasOption <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">res_stock_SB2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stock_benchmarking.html">stock_benchmarking</a></span><span class="op">(</span><span class="va">mes_ind_plat</span>,</span>
<span>                                    <span class="va">mes_eta_stock</span>,</span>
<span>                                    rho <span class="op">=</span> <span class="fl">0.729</span>,</span>
<span>                                    lambda <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                    biasOption <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res_stock_SB2</span><span class="op">$</span><span class="va">graphTable</span><span class="op">$</span><span class="va">t</span>, <span class="va">res_stock_SB2</span><span class="op">$</span><span class="va">graphTable</span><span class="op">$</span><span class="va">benchmarked</span>,</span>
<span>     type <span class="op">=</span> <span class="st">"b"</span>, col <span class="op">=</span> <span class="st">"red"</span>, xlab <span class="op">=</span> <span class="st">"t"</span>, ylab <span class="op">=</span> <span class="st">"Stocks étalonnés"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">res_stock_PB2</span><span class="op">$</span><span class="va">graphTable</span><span class="op">$</span><span class="va">t</span>, <span class="va">res_stock_PB2</span><span class="op">$</span><span class="va">graphTable</span><span class="op">$</span><span class="va">benchmarked</span>,</span>
<span>      type <span class="op">=</span> <span class="st">"b"</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"topleft"</span>, bty <span class="op">=</span> <span class="st">"n"</span>, inset <span class="op">=</span> <span class="fl">0.05</span>, lty <span class="op">=</span> <span class="fl">1</span>, pch <span class="op">=</span> <span class="fl">1</span>,</span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"blue"</span><span class="op">)</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"res_stock_SB2"</span>, <span class="st">"res_stock_PB2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html" class="external-link">title</a></span><span class="op">(</span><span class="st">"Stocks étalonnés - Indicateur plat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># L'apparence plutôt étrange des valeurs étalonnées produites par `benchmarking()` devient </span></span>
<span><span class="co"># soudainement plus évidente. En effet, la série étalonnée correspond aux ajustements </span></span>
<span><span class="co"># d'étalonnage lorsqu'on utilise un indicateur plat (par exemple, une série de 1 avec </span></span>
<span><span class="co"># un étalonnage proportionnel) :</span></span>
<span><span class="fu"><a href="../reference/plot_benchAdj.html">plot_benchAdj</a></span><span class="op">(</span>PB_graphTable <span class="op">=</span> <span class="va">res_stock_PB2</span><span class="op">$</span><span class="va">graphTable</span>,</span>
<span>              SB_graphTable <span class="op">=</span> <span class="va">res_stock_SB2</span><span class="op">$</span><span class="va">graphTable</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Les lacunes de l'approche « Proc Benchmarking » (fonction `benchmarking()`) avec </span></span>
<span><span class="co"># des stocks sont également très visibles lorsque l'on regarde les taux de croissance </span></span>
<span><span class="co"># trimestriels résultants, qui sont commodément produits par `plot_graphTable()`. </span></span>
<span><span class="co"># Portez une attention particulière à la transition des taux de croissance de T4 à T1 </span></span>
<span><span class="co"># à chaque année dans les graphiques PDF générés.</span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_stock_PB2</span><span class="op">$</span><span class="va">graphTable</span>, <span class="st">"Graphs_stock_PB_indicateur_plat.pdf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot_graphTable.html">plot_graphTable</a></span><span class="op">(</span><span class="va">res_stock_SB2</span><span class="op">$</span><span class="va">graphTable</span>, <span class="st">"Graphs_stock_SB_indicateur_plat.pdf"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Réinitialiser le répertoire de travail à son emplacement initial</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">iniwd</span><span class="op">)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Développé par Michel Ferland, Statistics Canada.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
