<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Empiler des « données étalon » — stack_bmkDF • gstest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Empiler des « données étalon » — stack_bmkDF"><meta name="description" content="Convertir un data frame d'étalons multivariés (voir ts_to_bmkDF()) pour les fonctions d'étalonnage
(benchmarking() et stock_benchmarking()) en un data frame empilé (long) avec six variables (colonnes) :
une (1) pour le nom de l'étalon (ex., nom de série)
quatre (4) pour la converture de l'étalon
une (1) pour la valeur de l'étalon


Les valeurs d'étalon manquantes (NA) ne sont pas incluses par défaut dans le data frame empilé renvoyé par
la fonction. Spécifiez l'argument keep_NA = TRUE pour les conserver.
Cette fonction est utile lorsque l'on souhaite utiliser l'argument by (mode de traitement groupes-BY) des
fonctions d'étalonnage afin d'étalonner plusieurs séries en un seul appel de fonction."><meta property="og:description" content="Convertir un data frame d'étalons multivariés (voir ts_to_bmkDF()) pour les fonctions d'étalonnage
(benchmarking() et stock_benchmarking()) en un data frame empilé (long) avec six variables (colonnes) :
une (1) pour le nom de l'étalon (ex., nom de série)
quatre (4) pour la converture de l'étalon
une (1) pour la valeur de l'étalon


Les valeurs d'étalon manquantes (NA) ne sont pas incluses par défaut dans le data frame empilé renvoyé par
la fonction. Spécifiez l'argument keep_NA = TRUE pour les conserver.
Cette fonction est utile lorsque l'on souhaite utiliser l'argument by (mode de traitement groupes-BY) des
fonctions d'étalonnage afin d'étalonner plusieurs séries en un seul appel de fonction."><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Navigation sur le site"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gstest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Dernière version publiée">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/gstest.html">Prise en main</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Référence</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/benchmarking-cookbook.html">Livre de recette sur l'étalonnage</a></li>
    <li><a class="dropdown-item" href="../articles/benchmarking-demo-script.html">Un script d'étalonnage pour débutant</a></li>
    <li><a class="dropdown-item" href="../articles/osqp-settings-sequence-dataframe.html">« Data frame » pour la séquence de paramètres d'OSQP</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-nouveaut-s" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Nouveautés</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-nouveaut-s"><li><h6 class="dropdown-header" data-toc-skip>Versions</h6></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/tree/main/">G-Séries 3.0 (version la plus récente - librairie R gstest 3.0.0)</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/releases/tag/v2.0/">G-Séries 2.0 (version SAS®)</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/releases/tag/v1.04/">G-Séries 1.04 (version SAS®)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changements</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Rechercher sur le site" placeholder="Rechercher" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ferlmic/gstest/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>

    <ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="#" onclick="window.location = location.href.replace('/fr/','/en/');"><span class="fa fa-language fa-lg"></span> English</a></li></ul></div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Empiler des « données étalon »</h1>
      <small class="dont-index">Source : <a href="https://github.com/ferlmic/gstest/tree/main/fr/R/stack_bmkDF.R" class="external-link"><code>R/stack_bmkDF.R</code></a></small>
      <div class="d-none name"><code>stack_bmkDF.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Convertir un <em>data frame</em> d'étalons multivariés (voir <code><a href="ts_to_bmkDF.html">ts_to_bmkDF()</a></code>) pour les fonctions d'étalonnage
(<code><a href="benchmarking.html">benchmarking()</a></code> et <code><a href="stock_benchmarking.html">stock_benchmarking()</a></code>) en un <em>data frame</em> empilé (long) avec six variables (colonnes) :</p><ul><li><p>une (1) pour le nom de l'étalon (ex., nom de série)</p></li>
<li><p>quatre (4) pour la converture de l'étalon</p></li>
<li><p>une (1) pour la valeur de l'étalon</p></li>
</ul><p>Les valeurs d'étalon manquantes (<code>NA</code>) ne sont pas incluses par défaut dans le <em>data frame</em> empilé renvoyé par
la fonction. Spécifiez l'argument <code>keep_NA = TRUE</code> pour les conserver.</p>
<p>Cette fonction est utile lorsque l'on souhaite utiliser l'argument <code>by</code> (mode de traitement <em>groupes-BY</em>) des
fonctions d'étalonnage afin d'étalonner plusieurs séries en un seul appel de fonction.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Utilisation<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stack_bmkDF</span><span class="op">(</span></span>
<span>  <span class="va">bmk_df</span>,</span>
<span>  ser_cName <span class="op">=</span> <span class="st">"series"</span>,</span>
<span>  startYr_cName <span class="op">=</span> <span class="st">"startYear"</span>,</span>
<span>  startPer_cName <span class="op">=</span> <span class="st">"startPeriod"</span>,</span>
<span>  endYr_cName <span class="op">=</span> <span class="st">"endYear"</span>,</span>
<span>  endPer_cName <span class="op">=</span> <span class="st">"endPeriod"</span>,</span>
<span>  val_cName <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  keep_NA <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-bmk-df">bmk_df<a class="anchor" aria-label="anchor" href="#arg-bmk-df"></a></dt>
<dd><p>(obligatoire)</p>
<p><em>Data frame</em>, ou objet compatible, qui contient les étalons multivariés à empiler.</p></dd>


<dt id="arg-ser-cname">ser_cName<a class="anchor" aria-label="anchor" href="#arg-ser-cname"></a></dt>
<dd><p>(optionnel)</p>
<p>Chaîne de caractères spécifiant le nom de la variable (colonne) du <em>data frame</em> empilé de sortie qui contiendra
les nom des étalons (nom des variables d'étalons dans le <em>data frame</em> d'étalons multivariés d'entrée). Cette variable
peut ensuite être utilisée comme variable de groupes-BY (argument <code>by</code>) avec les fonctions d'étalonnage.</p>
<p><strong>La valeur par défaut</strong> est <code>ser_cName = "series"</code>.</p></dd>


<dt id="arg-startyr-cname-startper-cname-endyr-cname-endper-cname">startYr_cName, startPer_cName, endYr_cName, endPer_cName<a class="anchor" aria-label="anchor" href="#arg-startyr-cname-startper-cname-endyr-cname-endper-cname"></a></dt>
<dd><p>(optionnel)</p>
<p>Chaînes de caractères spécifiant le nom des variables (colonnes) numériques du <em>data frame</em> d'étalons multivariés d'entrée
qui définissent la couverture des étalons, c'est-à-dire les identificateurs de l'année et de la période (cycle) de début et
de fin des étalons. Ces variables sont <em>transférées</em> dans le <em>data frame</em> empilé de sortie avec les mêmes noms de variable.</p>
<p><strong>Les valeurs par défaut</strong> sont <code>startYr_cName = "startYear"</code>, <code>startPer_cName = "startPeriod"</code>
<code>endYr_cName = "endYear"</code> et <code>endPer_Name = "endPeriod"</code>.</p></dd>


<dt id="arg-val-cname">val_cName<a class="anchor" aria-label="anchor" href="#arg-val-cname"></a></dt>
<dd><p>(optionnel)</p>
<p>Chaîne de caractères spécifiant le nom de la variable (colonne) du <em>data frame</em> empilé de sortie qui contiendra
les valeurs des étalons.</p>
<p><strong>La valeur par défaut</strong> est <code>val_cName = "value"</code>.</p></dd>


<dt id="arg-keep-na">keep_NA<a class="anchor" aria-label="anchor" href="#arg-keep-na"></a></dt>
<dd><p>(optionnel)</p>
<p>Argument logique (<em>logical</em>) spécifiant si les valeurs d'étalon manquantes (<code>NA</code>) du <em>data frame</em> d'étalons multivariés
d'entrée doivent être conservées dans le <em>data frame</em> empilé de sortie.</p>
<p><strong>La valeur par défaut</strong> est <code>keep_NA = FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="valeur-de-retour">Valeur de retour<a class="anchor" aria-label="anchor" href="#valeur-de-retour"></a></h2>
    <p>La fonction renvoie un <em>data frame</em> avec six variables :</p><ul><li><p>Nom de l'étalon (de la série), type caractère (voir l'argument <code>ser_cName</code>)</p></li>
<li><p>Année de début de la couverture de l'étalon, type numérique (voir argument <code>startYr_cName</code>)</p></li>
<li><p>Période de début de la couverture de l'étalon, type numérique (voir argument <code>startPer_cName</code>)</p></li>
<li><p>Année de fin de la couverture de l'étalon, type numérique (voir argument <code>endtYr_cName</code>)</p></li>
<li><p>Période de fin de la couverture de l'étalon, type numérique (voir argument <code>endPer_cName</code>)</p></li>
<li><p>Valeur de l'étalon, type numérique (voir argument <code>val_cName</code>)</p></li>
</ul><p>Note : la fonction renvoie un objet « data.frame » qui peut être explicitement converti en un autre
type d'objet avec la fonction <code>as*()</code> appropriée (ex., <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">tibble::as_tibble()</a></code> le convertirait en tibble).</p>
    </div>
    <div class="section level2">
    <h2 id="voir-galement">Voir également<a class="anchor" aria-label="anchor" href="#voir-galement"></a></h2>
    <div class="dont-index"><p><code><a href="stack_tsDF.html">stack_tsDF()</a></code> <code><a href="ts_to_bmkDF.html">ts_to_bmkDF()</a></code> <code><a href="benchmarking.html">benchmarking()</a></code> <code><a href="stock_benchmarking.html">stock_benchmarking()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Exemples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Créer un « data frame » d'étalons annuels pour 2 séries indicatrices trimestrielles </span></span></span>
<span class="r-in"><span><span class="co"># (avec des valeurs manquantes pour les étalons des 2 dernières années)</span></span></span>
<span class="r-in"><span><span class="va">mes_etalons</span> <span class="op">&lt;-</span> <span class="fu"><a href="ts_to_bmkDF.html">ts_to_bmkDF</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/ts.html" class="external-link">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ser1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">*</span>  <span class="fl">10</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                                         ser2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">*</span> <span class="fl">100</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">1</span><span class="op">)</span>, frequency <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                           ind_frequency <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mes_etalons</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   startYear startPeriod endYear endPeriod ser1 ser2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      2019           1    2019         4   10  100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      2020           1    2020         4   20  200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      2021           1    2021         4   30  300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2022           1    2022         4   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2023           1    2023         4   NA   NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Empiler les étalons ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># en rejetant les `NA` dans les données empilées (comportement par défaut)</span></span></span>
<span class="r-in"><span><span class="fu">stack_bmkDF</span><span class="op">(</span><span class="va">mes_etalons</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   series startYear startPeriod endYear endPeriod value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   ser1      2019           1    2019         4    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   ser1      2020           1    2020         4    20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   ser1      2021           1    2021         4    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   ser2      2019           1    2019         4   100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   ser2      2020           1    2020         4   200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   ser2      2021           1    2021         4   300</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># en conservant les `NA` dans les données empilées</span></span></span>
<span class="r-in"><span><span class="fu">stack_bmkDF</span><span class="op">(</span><span class="va">mes_etalons</span>, keep_NA <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    series startYear startPeriod endYear endPeriod value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    ser1      2019           1    2019         4    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    ser1      2020           1    2020         4    20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    ser1      2021           1    2021         4    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    ser1      2022           1    2022         4    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    ser1      2023           1    2023         4    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    ser2      2019           1    2019         4   100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    ser2      2020           1    2020         4   200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    ser2      2021           1    2021         4   300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    ser2      2022           1    2022         4    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   ser2      2023           1    2023         4    NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># en utilisant des noms de variables (colonnes) personnalisés</span></span></span>
<span class="r-in"><span><span class="fu">stack_bmkDF</span><span class="op">(</span><span class="va">mes_etalons</span>, ser_cName <span class="op">=</span> <span class="st">"nom_eta"</span>, val_cName <span class="op">=</span> <span class="st">"val_eta"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   nom_eta startYear startPeriod endYear endPeriod val_eta</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    ser1      2019           1    2019         4      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    ser1      2020           1    2020         4      20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    ser1      2021           1    2021         4      30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    ser2      2019           1    2019         4     100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    ser2      2020           1    2020         4     200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    ser2      2021           1    2021         4     300</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table des matières"><h2>Sur cette page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Développé par Michel Ferland, Statistics Canada.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

