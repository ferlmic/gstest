<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert reconciliation metadata — rkMeta_to_blSpecs • gstest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert reconciliation metadata — rkMeta_to_blSpecs"><meta name="description" content="
Convert a tsraking() metadata data frame to a tsbalancing() problem specs data frame."><meta property="og:description" content="
Convert a tsraking() metadata data frame to a tsbalancing() problem specs data frame."><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gstest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/gstest.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/benchmarking-cookbook.html">Benchmarking CookBook</a></li>
    <li><a class="dropdown-item" href="../articles/benchmarking-demo-script.html">A Beginner's Benchmarking Demo Script</a></li>
    <li><a class="dropdown-item" href="../articles/osqp-settings-sequence-dataframe.html">OSQP Settings Sequence Data Frame</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/tree/main/">G-Series 3.0 (latest - R package gstest 3.0.0)</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/releases/tag/v2.0/">G-Series 2.0 (SAS® version)</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/ferlmic/gstest/releases/tag/v1.04/">G-Series 1.04 (SAS® version)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ferlmic/gstest/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>

    <ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="#" onclick="window.location = location.href.replace('/en/','/fr/');"><span class="fa fa-language fa-lg"></span> Français</a></li></ul></div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert reconciliation metadata</h1>
      <small class="dont-index">Source: <a href="https://github.com/ferlmic/gstest/tree/main/R/rkMeta_to_blSpecs.R" class="external-link"><code>R/rkMeta_to_blSpecs.R</code></a></small>
      <div class="d-none name"><code>rkMeta_to_blSpecs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p></p>
<p>Convert a <code><a href="tsraking.html">tsraking()</a></code> metadata data frame to a <code><a href="tsbalancing.html">tsbalancing()</a></code> problem specs data frame.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rkMeta_to_blSpecs</span><span class="op">(</span></span>
<span>  <span class="va">metadata_df</span>,</span>
<span>  alterability_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alterSeries <span class="op">=</span> <span class="fl">1</span>, </span>
<span>  alterTotal1 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  alterTotal2 <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  alterability_df_only <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-metadata-df">metadata_df<a class="anchor" aria-label="anchor" href="#arg-metadata-df"></a></dt>
<dd><p>(mandatory)</p>
<p>Data frame, or object to be coerced to one, that describes the cross-sectional aggregation constraints
(additivity rules) for the raking problem. Two character variables must be included in the metadata data frame:
<code>series</code> and <code>total1</code>. Two variables are optional: <code>total2</code> (character) and <code>alterAnnual</code> (numeric). The values
of variable <code>series</code> represent the variable names of the component series in the input time series data frame
(argument <code>data_df</code>). Similarly, the values of variables <code>total1</code> and <code>total2</code> represent the variable names of
the 1<sup>st</sup> and 2<sup>nd</sup> dimension cross-sectional control totals in the input time series data
frame. Variable <code>alterAnnual</code> contains the alterability coefficient for the temporal constraint associated to
each component series. When specified, the latter will override the default alterability coefficient specified
with argument <code>alterAnnual</code>.</p></dd>


<dt id="arg-alterability-df">alterability_df<a class="anchor" aria-label="anchor" href="#arg-alterability-df"></a></dt>
<dd><p>(optional)</p>
<p>Data frame, or object to be coerced to one, or <code>NULL</code>, that contains the alterability coefficients variables.
They must correspond to a component series or a cross-sectional control total, that is, a variable with the same
name must exist in the input time series data frame (argument <code>data_df</code>). The values of these alterability
coefficients will override the default alterability coefficients specified with arguments <code>alterSeries</code>,
<code>alterTotal1</code> and <code>alterTotal2</code>. When the input time series data frame contains several observations and the
alterability coefficients data frame contains only one, the alterability coefficients are used (repeated) for
all observations of the input time series data frame. Alternatively, the alterability coefficients data frame
may contain as many observations as the input time series data frame.</p>
<p><strong>Default value</strong> is <code>alterability_df = NULL</code> (default alterability coefficients).</p></dd>


<dt id="arg-alterseries">alterSeries<a class="anchor" aria-label="anchor" href="#arg-alterseries"></a></dt>
<dd><p>(optional)</p>
<p>Nonnegative real number specifying the default alterability coefficient for the component series values. It
will apply to component series for which alterability coefficients have not already been specified in the
alterability coefficients data frame (argument <code>alterability_df</code>).</p>
<p><strong>Default value</strong> is <code>alterSeries = 1.0</code> (nonbinding component series values).</p></dd>


<dt id="arg-altertotal-">alterTotal1<a class="anchor" aria-label="anchor" href="#arg-altertotal-"></a></dt>
<dd><p>(optional)</p>
<p>Nonnegative real number specifying the default alterability coefficient for the 1<sup>st</sup> dimension
cross-sectional control totals. It will apply to cross-sectional control totals for which alterability
coefficients have not already been specified in the alterability coefficients data frame (argument
<code>alterability_df</code>).</p>
<p><strong>Default value</strong> is <code>alterTotal1 = 0.0</code> (binding 1<sup>st</sup> dimension cross-sectional control totals)</p></dd>


<dt id="arg-altertotal-">alterTotal2<a class="anchor" aria-label="anchor" href="#arg-altertotal-"></a></dt>
<dd><p>(optional)</p>
<p>Nonnegative real number specifying the default alterability coefficient for the 2<sup>nd</sup> dimension
cross-sectional control totals. It will apply to cross-sectional control totals for which alterability
coefficients have not already been specified in the alterability coefficients data frame (argument
<code>alterability_df</code>).</p>
<p><strong>Default value</strong> is <code>alterTotal2 = 0.0</code> (binding 2<sup>nd</sup> dimension cross-sectional control totals).</p></dd>


<dt id="arg-alterability-df-only">alterability_df_only<a class="anchor" aria-label="anchor" href="#arg-alterability-df-only"></a></dt>
<dd><p>(optional)</p>
<p>Logical argument specifying whether or not only the set of alterability ceofficients found in the alterability
file (argument <code>alterability_df</code>) should be included in the returned <code><a href="tsbalancing.html">tsbalancing()</a></code> problem specs data frame.
When <code>alterability_df_only = FALSE</code> (the default), the alterability coefficients specified with arguments
<code>alterSeries</code>, <code>alterTotal1</code> and <code>alterTotal2</code> are combined with those found in <code>alterability_df</code> (the latter
coefficients overwriting the former) and the returned data frame therefore contains alterability coefficients
for all component and cross-sectional control total series. This argument does not affect the set of temporal
total alterability coefficients (associated to <code><a href="tsraking.html">tsraking()</a></code> argument <code>alterAnnual</code>) that are included in the
returned <code><a href="tsbalancing.html">tsbalancing()</a></code> problem specs data frame. The latter always strictly contains those specified in
<code>metadata_df</code> with a non-missing (non-<code>NA</code>) value for column <code>alterAnnual</code>.</p>
<p><strong>Default value</strong> is <code>alterability_df_only = FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="tsbalancing.html">tsbalancing()</a></code> problem specs data frame (argument <code>problem_specs_df</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The preceding description of argument <code>alterability_df</code> comes from <code><a href="tsraking.html">tsraking()</a></code>. This function
(<code>rkMeta_to_blSpecs()</code>) slightly changes the specification of alterability coefficients with argument
<code>alterability_df</code> by allowing either</p><ul><li><p>a single observation, specifying the set of alterability coefficients to use for all periods,</p></li>
<li><p>or one or several observations with an additional column named <code>timeVal</code> allowing the specification of
both period-specific alterability coefficients (<code>timeVal</code> is not <code>NA</code>) and generic coefficients to use for
all other periods (<code>timeVal</code> is <code>NA</code>). Values for column <code>timeVal</code> correspond to the <em>time values</em>
of a "ts" object as returned by <code><a href="https://rdrr.io/r/stats/time.html" class="external-link">stats::time()</a></code>, conceptually corresponding to \(year + (period - 1) /
frequency\).</p></li>
</ul><p>Another difference with <code><a href="tsraking.html">tsraking()</a></code> is that missing (<code>NA</code>) values are allowed in the alterability coefficients
data frame (argument <code>alterability_df</code>) and result in using the generic coefficients (observations for which
<code>timeVal</code> is <code>NA</code>) or the default coefficients (arguments <code>alterSeries</code>, <code>alterTotal1</code> and <code>alterTotal2</code>).</p>
<p>Note that apart from discarding alterability coefficients for series not listed in the <code><a href="tsraking.html">tsraking()</a></code> metadata
data frame (argument <code>metadata_df</code>), this function does not validate the values specified in the alterability
coefficients data frame (argument <code>alterability_df</code>) nor the ones specified with column <code>alterAnnual</code> in the
<code><a href="tsraking.html">tsraking()</a></code> metadata data frame (argument <code>metadata_df</code>). The function transfers them <em>as is</em> in the
returned <code><a href="tsbalancing.html">tsbalancing()</a></code> problem specs data frame.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="tsraking.html">tsraking()</a></code> <code><a href="tsbalancing.html">tsbalancing()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># `tsraking()` metadata for a 2-dimensional raking problem (2 x 2 table)</span></span></span>
<span class="r-in"><span><span class="va">my_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>series <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A2"</span>, <span class="st">"B1"</span>, <span class="st">"B2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          total1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"totA"</span>, <span class="st">"totA"</span>, <span class="st">"totB"</span>, <span class="st">"totB"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          total2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tot1"</span>, <span class="st">"tot2"</span>, <span class="st">"tot1"</span>, <span class="st">"tot2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_metadata</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   series total1 total2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     A1   totA   tot1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     A2   totA   tot2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     B1   totB   tot1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     B2   totB   tot2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert to `tsbalancing()` specifications</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Include the default `tsraking()` alterability coefficients</span></span></span>
<span class="r-in"><span><span class="fu">rkMeta_to_blSpecs</span><span class="op">(</span><span class="va">my_metadata</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     type  col                       row coef timeVal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     EQ &lt;NA&gt;   Marginal Total 1 (totA)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   &lt;NA&gt;   A1   Marginal Total 1 (totA)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   &lt;NA&gt;   A2   Marginal Total 1 (totA)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   &lt;NA&gt; totA   Marginal Total 1 (totA)   -1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     EQ &lt;NA&gt;   Marginal Total 2 (totB)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   &lt;NA&gt;   B1   Marginal Total 2 (totB)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   &lt;NA&gt;   B2   Marginal Total 2 (totB)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   &lt;NA&gt; totB   Marginal Total 2 (totB)   -1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     EQ &lt;NA&gt;   Marginal Total 3 (tot1)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  &lt;NA&gt;   A1   Marginal Total 3 (tot1)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  &lt;NA&gt;   B1   Marginal Total 3 (tot1)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  &lt;NA&gt; tot1   Marginal Total 3 (tot1)   -1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    EQ &lt;NA&gt;   Marginal Total 4 (tot2)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  &lt;NA&gt;   A2   Marginal Total 4 (tot2)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  &lt;NA&gt;   B2   Marginal Total 4 (tot2)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  &lt;NA&gt; tot2   Marginal Total 4 (tot2)   -1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 alter &lt;NA&gt; Period Value Alterability   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18  &lt;NA&gt;   A1 Period Value Alterability    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19  &lt;NA&gt;   A2 Period Value Alterability    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20  &lt;NA&gt;   B1 Period Value Alterability    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21  &lt;NA&gt;   B2 Period Value Alterability    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22  &lt;NA&gt; totA Period Value Alterability    0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23  &lt;NA&gt; totB Period Value Alterability    0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24  &lt;NA&gt; tot1 Period Value Alterability    0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25  &lt;NA&gt; tot2 Period Value Alterability    0      NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Almost binding 1st marginal totals (small alter. coef for columns `totA` and `totB`)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu">rkMeta_to_blSpecs</span><span class="op">(</span><span class="va">my_metadata</span>, alterTotal1 <span class="op">=</span> <span class="fl">1e-6</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    type  col                       row  coef timeVal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 &lt;NA&gt;   B1 Period Value Alterability 1e+00      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 &lt;NA&gt;   B2 Period Value Alterability 1e+00      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 &lt;NA&gt; totA Period Value Alterability 1e-06      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 &lt;NA&gt; totB Period Value Alterability 1e-06      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 &lt;NA&gt; tot1 Period Value Alterability 0e+00      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 &lt;NA&gt; tot2 Period Value Alterability 0e+00      NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Do not include alterability coefficients (aggregation constraints only)</span></span></span>
<span class="r-in"><span><span class="fu">rkMeta_to_blSpecs</span><span class="op">(</span><span class="va">my_metadata</span>, alterability_df_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    type  col                     row coef timeVal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    EQ &lt;NA&gt; Marginal Total 1 (totA)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  &lt;NA&gt;   A1 Marginal Total 1 (totA)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  &lt;NA&gt;   A2 Marginal Total 1 (totA)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  &lt;NA&gt; totA Marginal Total 1 (totA)   -1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    EQ &lt;NA&gt; Marginal Total 2 (totB)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  &lt;NA&gt;   B1 Marginal Total 2 (totB)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  &lt;NA&gt;   B2 Marginal Total 2 (totB)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  &lt;NA&gt; totB Marginal Total 2 (totB)   -1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    EQ &lt;NA&gt; Marginal Total 3 (tot1)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 &lt;NA&gt;   A1 Marginal Total 3 (tot1)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 &lt;NA&gt;   B1 Marginal Total 3 (tot1)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 &lt;NA&gt; tot1 Marginal Total 3 (tot1)   -1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   EQ &lt;NA&gt; Marginal Total 4 (tot2)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 &lt;NA&gt;   A2 Marginal Total 4 (tot2)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 &lt;NA&gt;   B2 Marginal Total 4 (tot2)    1      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 &lt;NA&gt; tot2 Marginal Total 4 (tot2)   -1      NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With an alterability coefficients file (argument `alterability_df`)</span></span></span>
<span class="r-in"><span><span class="va">my_alter</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>B2 <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu">rkMeta_to_blSpecs</span><span class="op">(</span><span class="va">my_metadata</span>, alterability_df <span class="op">=</span> <span class="va">my_alter</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    type  col                       row coef timeVal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 &lt;NA&gt;   B1 Period Value Alterability  1.0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 &lt;NA&gt;   B2 Period Value Alterability  0.5      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 &lt;NA&gt; totA Period Value Alterability  0.0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 &lt;NA&gt; totB Period Value Alterability  0.0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 &lt;NA&gt; tot1 Period Value Alterability  0.0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 &lt;NA&gt; tot2 Period Value Alterability  0.0      NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only include the alterability coefficients from `alterability_df` </span></span></span>
<span class="r-in"><span><span class="co"># (i.e., for column `B2` only)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu">rkMeta_to_blSpecs</span><span class="op">(</span><span class="va">my_metadata</span>, alterability_df <span class="op">=</span> <span class="va">my_alter</span>,</span></span>
<span class="r-in"><span>                       alterability_df_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     type  col                       row coef timeVal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    EQ &lt;NA&gt;   Marginal Total 4 (tot2)   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  &lt;NA&gt;   A2   Marginal Total 4 (tot2)  1.0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  &lt;NA&gt;   B2   Marginal Total 4 (tot2)  1.0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  &lt;NA&gt; tot2   Marginal Total 4 (tot2) -1.0      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 alter &lt;NA&gt; Period Value Alterability   NA      NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18  &lt;NA&gt;   B2 Period Value Alterability  0.5      NA</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michel Ferland, Statistics Canada.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

